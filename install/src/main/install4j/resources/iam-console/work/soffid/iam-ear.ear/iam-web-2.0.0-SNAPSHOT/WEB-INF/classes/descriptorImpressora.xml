<?xml version="1.0" encoding="UTF-8"?>

<zkib-model>
	<datanode name="impressores">
		<finder name="impressora" type="impressora">
			<ejb-finder jndi="java:comp/env/ejb/ImpressoraEJB"
				method="findImpressoresByCriteri" if = "${queryEnabled}"> <!-- printer:query -->	        
				<parameter value="${codi}"/>
				<parameter value="${nom}"/>
				<parameter value="${local}"/>
				<parameter value="${servidor}"/>
			</ejb-finder>
			<new-instance-bean className="es.caib.seycon.ng.comu.Impressora">
			</new-instance-bean>
		</finder>
	</datanode>
	
	<datanode name="impressora">

		<finder name="usuariImpressora" type="usuariImpressora">
			<ejb-finder jndi="java:comp/env/ejb/ImpressoraEJB" 
				method="getUsuariImpressoresByCodiImpressora">  <!-- printer:query -->
				<parameter value="${instance.codi}"/>
			</ejb-finder>
			<new-instance-bean
				className="es.caib.seycon.ng.comu.UsuariImpressora">
			</new-instance-bean>
		</finder>
	
		<ejb-handler jndi="java:comp/env/ejb/ImpressoraEJB">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}"/>
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}"/>
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}"/>			
			</update-method>
		</ejb-handler>
		<validator>
			<attribute-validator expr="${instance.codi}" notNull="true" friendlyName="impress.codeValidation"/>
			<attribute-validator expr="${instance.nomMaquina}" notNull="true" friendlyName="impress.hostNameValidation"/>
		</validator>
	</datanode>

	<datanode name="usuariImpressora">
		<ejb-handler jndi="java:comp/env/ejb/ImpressoraEJB">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}"/>
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}"/>
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}"/>			
			</update-method>
		</ejb-handler>
	</datanode>
	
</zkib-model>
