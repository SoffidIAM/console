<?xml version="1.0" encoding="UTF-8"?>

<zkib-model>

	<datanode name="root">
		<finder name="passwordDomain" type="passwordDomain">
			<ejb-finder jndi="java:/module/UserDomainService-v2"
				method="findAllPasswordDomain">
			</ejb-finder>
			<new-instance-bean className="com.soffid.iam.api.PasswordDomain">
			</new-instance-bean>
		</finder>
		<finder name="userTypeAndSelect" type="userType" refreshAfterCommit="true">
			<script-finder>
				u = new com.soffid.iam.api.UserType();
				u.setDescription ("- Select a user type -");
				return u;
			</script-finder>
			<ejb-finder jndi="java:/module/UserDomainService-v2"
				method="findAllUserType" if="${queryEnabled}">
			</ejb-finder>
			<new-instance-bean className="es.caib.seycon.ng.comu.TipusUsuari">
			</new-instance-bean>
		</finder>
		<finder name="badWords" type="badWords">
			<ejb-finder jndi="java:/module/UserDomainService-v2"
				method="findAllForbiddenWords" if="${queryEnabled}">
			</ejb-finder>
			<new-instance-bean className="com.soffid.iam.api.ForbiddenWord">
			</new-instance-bean>
		</finder>
	</datanode>

	<datanode name="userType" transient="true">
	</datanode>

	<datanode name="badWords">
		<ejb-handler jndi="java:/module/UserDomainService-v2">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}" />
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}" />
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}" />
			</update-method>
		</ejb-handler>
		<validator>
			<attribute-validator expr="${instance.forbiddenWord}" notNull="true" friendlyName="dominiUsuaris.ParaulaValidation"/>
		</validator>
	</datanode>

	<datanode name="passwordForbiddenWords">
		<ejb-handler jndi="java:/module/UserDomainService-v2">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}" />
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}" />
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}" />
			</update-method>
		</ejb-handler>
	</datanode>

	<datanode name="policy">
		<ejb-handler jndi="java:/module/UserDomainService-v2">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}" />
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}" />
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}" />
			</update-method>
		</ejb-handler>
		<finder name="forbiddenWords" type="passwordForbiddenWords">
			<ejb-finder jndi="java:/module/UserDomainService-v2"
				method="findForbiddenWordsPasswordPolicy">
				<parameter value="${instance}" />
			</ejb-finder>
			<new-instance-bean
				className="com.soffid.iam.api.PasswordPolicyForbbidenWord">
			</new-instance-bean>
		</finder>
	</datanode>

	<datanode name="passwordDomain">
		<finder name="policy" type="policy">
			<ejb-finder jndi="java:/module/UserDomainService-v2"
				method="findAllPasswordPolicyDomain">
				<parameter value="${instance.name}" />
			</ejb-finder>
			<new-instance-bean className="com.soffid.iam.api.PasswordPolicy">
				<bean-attribute name="passwordDomainCode" value="${instance.name}" />
			</new-instance-bean>
		</finder>

		<ejb-handler jndi="java:/module/UserDomainService-v2">
			<insert-method method="create" returnBean="true">
				<parameter value="${instance}" />
			</insert-method>
			<delete-method method="delete">
				<parameter value="${instance}" />
			</delete-method>
			<update-method method="update">
				<parameter value="${instance}" />
			</update-method>
		</ejb-handler>
	</datanode>

</zkib-model>
