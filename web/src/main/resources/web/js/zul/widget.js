zk.load("zul.vd"),zkTxbox={},zkau.textbox=zkTxbox,zkTxbox._intervals={},_zktbau={setAttr:zkau.setAttr},zkau.setAttr=function(e,t,n){if("disabled"==t||"readOnly"==t){var i=$real(e),a=i.type?i.type.toUpperCase():"";"TEXT"!=a&&"TEXTAREA"!=a||zk["true"==n?"addClass":"rmClass"](i,"disabled"==t?"text-disd":"readonly")}return _zktbau.setAttr(e,t,n)},zkTxbox.init=function(e,t,n){if(zk.listen(e,"focus",t||zkTxbox.onfocus),zk.listen(e,"blur",n||zkTxbox.onblur),zk.listen(e,"select",zkTxbox.onselect),"TEXTAREA"==$tag(e)&&zk.listen(e,"keyup",zkTxbox.onkey),zk.listen(e,"keydown",zkTxbox.onkeydown),getZKAttr($outer(e),"srvald")){var i=e.value;e.defaultValue=i+"-",i!=e.value&&(e.value=i)}e.readOnly&&zk.addClass(e,"readonly"),e.disabled&&zk.addClass(e,"text-disd")},zkTxbox.cleanup=zkTxbox.onHide=function(e){var t=$real(e);t&&zkVld.closeErrbox(t.id,!0)},zkTxbox.onselect=function(e){var t=zkau.evtel(e),n=$outer(t);if(zkau.asap(n,"onSelection")){var i=zk.getSelectionRange(t);zkau.send({uuid:n.id,cmd:"onSelection",data:[i[0],i[1],t.value.substring(i[0],i[1])]},100)}},zkTxbox.onblur=function(e){var t=zkau.evtel(e),n=zkTxbox._noonblur(t);zkTxbox._scanStop(t),zkTxbox.updateChange(t,n),zkau.onblur(e,n)},zkTxbox._scanStop=function(e){var t=zkTxbox._intervals[e.id];t&&(clearInterval(t),delete zkTxbox._intervals[e.id]),e.removeAttribute&&(e.removeAttribute("zk_changing_last"),e.removeAttribute("zk_changing_selbk"),e.removeAttribute("zk_typeAhead"))},zkTxbox.updateChange=function(e,t){if(zkVld.validating)return!0;if(e&&e.id){var n=t?null:zkVld.validate(e.id);if(n)return zkVld.errbox(e.id,n),e.setAttribute("zk_err","true"),zkau.send({uuid:$uuid(e),cmd:"onError",data:[e.value,n]},-1),!1;zkVld.closeErrbox(e.id)}return t||zkTxbox.onupdate(e),!0},zkTxbox._noonblur=function(e){if(zk.alerting)return!0;var t=zkau.currentFocus;if(e&&t&&e!=t){for(var n=e;;n=n.parentNode){if(!n)return!1;if("true"==getZKAttr(n,"combo"))break;if(getZKAttr(n,"type"))return!1}for(;t;t=$parent(t))if(t==n)return!0}return!1},zkTxbox.onupdate=function(e){var t=e.value;if(t!=e.defaultValue){e.defaultValue=t;var n=$uuid(e),i=zk.getSelectionRange(e);zkau.sendasap({uuid:n,cmd:"onChange",data:[t,!1,i[0]]},zk.delayTime_onChange?zk.delayTime_onChange:150)}else e.getAttribute("zk_err")&&(e.removeAttribute("zk_err"),zkau.send({uuid:$uuid(e),cmd:"onError",data:[t,null]},-1))},zkTxbox.onkey=function(e){var t=Event.element(e),n=getZKAttr(t,"maxlen");n&&(n=$int(n))>0&&t.value!=t.defaultValue&&t.value.length>n&&(t.value=t.value.substring(0,n))},zkTxbox.onkeydown=function(e){var t=Event.element(e),n=$uuid(t),i=$e(n),a=Event.keyCode(e);13==a&&zkau.asap(i,"onOK")||27==a&&zkau.asap(i,"onCancel")?(zkTxbox._scanStop(t),t.setAttribute("zk_resume_scan","true"),zkTxbox.updateChange(t,!1)):t.getAttribute("zk_resume_scan")&&!zkTxbox._intervals[t.id]&&(t.removeAttribute("zk_resumeScan"),t.setAttribute("zk_changing_last",""),zkTxbox._intervals[t.id]=setInterval("zkTxbox._scanChanging('"+t.id+"')",500))},zkTxbox.onfocus=function(e){var t=zkau.evtel(e);zkau.onfocus0(e)&&t&&t.id&&zkau.asap($outer(t),"onChanging")&&(t.removeAttribute("zk_resume_scan"),t.setAttribute("zk_changing_last",t.value),zkTxbox._intervals[t.id]||(zkTxbox._intervals[t.id]=setInterval("zkTxbox._scanChanging('"+t.id+"')",500)))},zkTxbox._scanChanging=function(e){var t=$e(e),n=t.getAttribute("zk_typeAhead")||t.value;t&&zkau.asap($outer(t),"onChanging")&&t.getAttribute("zk_changing_last")!=n&&zkTxbox.sendOnChanging(t,n)},zkTxbox.sendOnChanging=function(e,t){t=t||e.value,e.setAttribute("zk_changing_last",t);var n=e.getAttribute("zk_changing_selbk");e.removeAttribute("zk_changing_selbk");var i=zk.getSelectionRange(e);zkau.send({uuid:$uuid(e),cmd:"onChanging",data:[t,n==t,i[0]],ignorable:!0},100)},zkTxbox.setAttr=function(e,t,n){if("z.sel"==t){var i=$real(e);if("all"==n)return zk.asyncSelect(i.id,zk.ie?150:0),!0;var a=n.split(","),o=$int(a[0]),r=$int(a[1]),k=i.value.length;if(o<0&&(o=0),o>k&&(o=k),r<0&&(r=0),r>k&&(r=k),i.setSelectionRange)i.setSelectionRange(o,r),i.focus();else if(i.createTextRange){var u=i.createTextRange();o!=r?(u.moveEnd("character",r-u.text.length),u.moveStart("character",o)):u.move("character",o),u.select()}return!0}return!1},zkInbox={},zkLnbox={},zkDcbox={},zkDbbox={},zkInpEl={},zkInpEl.baseChars="+0123456789"+zk.MINUS+zk.PERCENT+zk.GROUPING,zkInpEl.ignoreKeys=function(e,t){var n=Event.keyCode(e);if(zk.ie||!Event.isSpecialKey(e)&&8!=n&&46!=n){var i=Event.charCode(e);-1===t.indexOf(String.fromCharCode(i))&&Event.stop(e)}},zkInbox.init=zkLnbox.init=function(e){zk.listen(e,"keypress",zkInbox.onkeypress),zkTxbox.init(e)},zkInbox.onkeypress=function(e){zkInpEl.ignoreKeys(e,zkInpEl.baseChars)},zkDcbox.init=zkDbbox.init=function(e){zk.listen(e,"keypress",zkDcbox.onkeypress),zkTxbox.init(e)},zkDcbox.onkeypress=function(e){zkInpEl.ignoreKeys(e,zkInpEl.baseChars+zk.DECIMAL)},zkInbox.setAttr=zkLnbox.setAttr=zkDcbox.setAttr=zkDbbox.setAttr=zkTxbox.setAttr,zkInbox.onHide=zkLnbox.onHide=zkDcbox.onHide=zkDbbox.onHide=zkTxbox.onHide,zkInbox.cleanup=zkLnbox.cleanup=zkDcbox.cleanup=zkDbbox.cleanup=zkTxbox.cleanup,zkInbox.validate=function(e){return zkVld.onlyInt(e.id)},zkLnbox.validate=function(e){return zkVld.onlyLong(e.id)},zkDcbox.validate=function(e){return zkVld.onlyNum(e.id)},zkDbbox.validate=function(e){return zkVld.onlyNum(e.id)},zkButton={},zkButton.init=function(e){zk.listen(e,"click",zkau.onclick),zk.listen(e,"dblclick",zkau.ondblclick),zk.listen(e,"focus",zkau.onfocus),zk.listen(e,"blur",zkau.onblur)},zkTbtn={},zkTbtn.init=function(e){zk.listen(e,"click",zkTbtn.onclick),"true"!=getZKAttr(e,"disd")&&(zk.listen(e,"focus",zkau.onfocus),zk.listen(e,"blur",zkau.onblur))},zkTbtn.onclick=function(e){e||(e=window.event);var t=Event.element(e);"true"!=getZKAttr(t,"disd")?zkau.onclick(e,!0):Event.stop(e)},zkCkbox={},zkCkbox.init=function(e){e=$real(e),zk.listen(e,"click",function(){zkCkbox.onclick(e)}),zk.listen(e,"focus",zkau.onfocus),zk.listen(e,"blur",zkau.onblur)},zkCkbox.setAttr=function(e,t,n){if("style"==t){var i=zk.firstChild(e,"LABEL",!0);i&&zkau.setAttr(i,t,zk.getTextStyle(n))}return zkau.setAttr(e,t,n),!0},zkCkbox.rmAttr=function(e,t){if("style"==t){var n=zk.firstChild(e,"LABEL",!0);n&&zkau.rmAttr(n,t)}return zkau.rmAttr(e,t),!0},zkRadio={},zkRadio.init=zkCkbox.init,zkRadio.setAttr=zkCkbox.setAttr,zkRadio.rmAttr=zkCkbox.rmAttr,zkCkbox.onclick=function(e){var t=e.checked;if(t!=e.defaultChecked){if("radio"==e.type)for(var n=document.getElementsByName(e.name),i=n.length;--i>=0;)n[i].defaultChecked=!1;e.defaultChecked=t;var a=$uuid(e);zkau.sendasap({uuid:a,cmd:"onCheck",data:[t]})}},zkGrbox={},zkCapt={},zkGrbox.onSize=zkGrbox._fixHgh=function(e){var t=$e(e.id+"!cave");if(t){var n=e.style.height;n&&"auto"!=n&&(zk.ie6Only&&(t.style.height=""),zk.setOffsetHeight(t,zk.getVflexHeight(t.parentNode)));var i=$e(e.id+"!sdw");if(i){var a=$int(Element.getStyle(t,"border-bottom-width"));i.style.display=a?"":"none"}}},zkGrbox.setAttr=function(e,t,n){switch(t){case"z.open":return zkGrbox.open(e,"true"==n,!0),!0;case"z.cntStyle":return(i=$e(e.id+"!cave"))&&(zk.setStyle(i,null!=n?n:""),zkGrbox._fixHgh(e)),!0;case"z.cntScls":var i;return(i=$e(e.id+"!cave"))&&(i.className=null!=n?n:"",zkGrbox._fixHgh(e)),!0;case"style":case"style.height":return zkau.setAttr(e,t,n),zkGrbox._fixHgh(e),!0}return!1},zkGrbox.onclick=function(e,t){e||(e=window.event);for(var n=Event.element(e);"Grbox"!=$type(n);n=$parent(n)){var i=$tag(n);if("BUTTON"==i||"INPUT"==i||"TEXTAREA"==i||"SELECT"==i||"A"==i||"TD"!=i&&"TR"!=i&&n.onclick)return}if(t){var a=$e(t);if("false"==getZKAttr(a,"closable"))return;(a=$e(t+"!slide"))&&zkGrbox.open(t,!$visible(a),!1,!0)}},zkGrbox.open=function(e,t,n,i){if(e=$e(e)){var a=$e(e.id+"!slide");!a||t==$visible(a)||a.getAttribute("zk_visible")||i&&getZKAttr(a,"animating")||(t?anima.slideDown(a):anima.slideUp(a),n||zkau.sendasap({uuid:e.id,cmd:"onOpen",data:[t]}),t&&setTimeout(function(){zkGrbox._fixHgh(e)},500))}},zkCapt.init=function(e){var t=zkCapt._parentGrbox(e);e=e.rows[0],t&&e&&zk.listen(e,"click",function(e){zkGrbox.onclick(e,t.id)})},zkCapt._parentGrbox=function(e){for(;e=e.parentNode;){var t=$type(e);if("Grbox"==t)return e;if(t)break}return null},zkImg={},zk.ie6Only&&(zkImg.init=function(e){return zkImg._fixpng(e)},zkImg._fixpng=function(e){if(e.getAttribute("zk_alpha")&&e.src&&e.src.toLowerCase().endsWith(".png")){var t=e.id,n=e.width,i=e.height;n||(n=e.offsetWidth),i||(i=e.offsetHeight);var a="width:"+n+"px;height:"+i+"px;";e.hspace&&(a+="margin-left:"+e.hspace+"px;margin-right:"+e.hspace+"px;"),e.vspace&&(a+="margin-top:"+e.vspace+"px;margin-bottom:"+e.vspace+"px;"),a+=e.style.cssText;var o='<span id="'+t+'" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+e.src+"', sizingMethod='scale');display:inline-block;";"left"==e.align?o+="float:left;":"right"==e.align&&(o+="float:right;"),"A"==$tag(e.parentNode)&&(o+="cursor:hand;"),o+=a+'"',e.className&&(o+=' class="'+e.className+'"'),e.title&&(o+=' title="'+e.title+'"');for(var r=e.attributes,k=0,u=r.length;k<u;++k){var z=r.item(k);z.name.startsWith("z.")&&(o+=" "+z.name+'="'+z.value+'"')}return o+="></span>",e.isMap&&(o+='<img style="position:relative;left:-'+n+"px;"+a+'" src="'+zk.getUpdateURI("/web/img/spacer.gif")+'" ismap="ismap"',e.useMap&&(o+=' usemap="'+e.useMap+'"'),o+="/>"),e.outerHTML=o,$e(t)}}),zkMap={},zkArea={},zkMap.init=function(e){zkMap._ckchd(e),zk.newFrame("zk_hfr_",null,zk.safari?"width:0;height:0;display:inline":"display:none")},zkMap._ckchd=function(e){var t=e.id+"_map",n=$e(t),i=$real(e),a=n&&n.areas.length;i.useMap=a?"#"+t:"",i.isMap=!a},zkMap.setAttr=function(e,t,n){return"ckchd"==t&&(zkMap._ckchd(e),!0)},zkMap.onSize=function(e){if(zk.ie6Only){var t=$real(e);return zkImg._fixpng(t)}},zkArea.init=function(e){zk.listen(e,"click",zkArea.onclick)},zkArea.onclick=function(e){if(!zkMap._toofast()){var t=Event.element(e);if(t){var n=$parentByType(t,"Map");n&&zkau.send({uuid:n.id,cmd:"onClick",data:[getZKAttr(t,"aid")],ctl:!0})}}},zkMap.onclick=function(e){if(!zkMap._toofast()){var t=e.indexOf("?");if(!(t<0)){var n=e.indexOf("?",++t);if(!(n<0)){var i=e.substring(t,n);if($e(i)&&!((t=e.indexOf(",",++n))<0)){var a=e.substring(n,t),o=e.substring(t+1);zkau.send({uuid:i,cmd:"onClick",data:[a,o],ctl:!0})}}}}},zkMap._toofast=function(){if(zk.gecko){var e=$now();if(zkMap._stamp&&e-zkMap._stamp<800)return!0;zkMap._stamp=e}return!1},zkPMeter={},zkPMeter.onSize=zkPMeter.onVisi=function(e){var t=$e(e.id+"!img");if(t){zk.ie6Only&&(t.style.width="");var n=$int(getZKAttr(e,"value"));t.style.width=Math.round(e.clientWidth*n/100)+"px"}},zkPMeter.setAttr=function(e,t,n){return zkau.setAttr(e,t,n),"z.value"!=t&&"style.width"!=t||zkPMeter.onSize(e),!0},zkPg={},zkPg.go=function(e,t){var n=$parentByType(e,"Pg");n&&zkau.send({uuid:n.id,cmd:"onPaging",data:[t]})},zkPop={},zkPop.context=function(e,t){zk.show(e),zkPop._pop.addFloatId(e.id,!0),zkau.hideCovered(),zkau.asap(e,"onOpen")&&zkau.send({uuid:e.id,cmd:"onOpen",data:t?[!0,t.id]:[!0]})},zkPop.close=function(e){zkPop._pop.removeFloatId(e.id),zkPop._close(e),rmZKAttr(e,"owner")},zkPop._close=function(e){e.style.display="none",zk.unsetVParent(e),zkau.hideCovered(),zkau.asap(e,"onOpen")&&zkau.send({uuid:e.id,cmd:"onOpen",data:[!1]})},zk.Popup=Class.create(),Object.extend(Object.extend(zk.Popup.prototype,zk.Floats.prototype),{_close:function(e){zkPop._close(e)}}),zkPop._pop||zkau.floats.push(zkPop._pop=new zk.Popup),zkIfr={},zk.ie?zkIfr.init=function(e){zk.booting&&(e.src=e.src)}:zk.gecko&&(zkIfr.onVisi=function(e){e.src.indexOf(".xml")>=0&&(e.src=e.src)});var zkStyle={init:function(e){var t=getZKAttr(e,"src");t&&zk.loadCSSDirect(t,e.id+"-")},cleanup:function(e){var t=$e(e.id+"-");t&&zk.remove(t)}},zkWgt={fixDropBtn:function(e){(e=$e(e))&&zkWgt._fixdbtn(e)},_fixdbtn:function(e){if(e=$e(e)){var t=$e(e.id+"!btn");if(zk.isRealVisible(t)&&"relative"!=t.style.position){var n=$real(e);if(!n.offsetHeight||!t.offsetHeight)return void setTimeout("zkWgt._fixdbtn($e('"+e.id+"'))",66);var i=n.offsetHeight-t.offsetHeight;if(i>0)if(zk.gecko3){zk.addClass(t,"inline-block");var a=zk.firstChild(t,"IMG");a&&(a.style.marginTop=Math.round(i/2)+"px"),t.style.height=zk.revisedSize(t,n.offsetHeight,!0)+"px"}else{var o=Math.round(i/2);t.style.paddingTop=o+"px",t.style.paddingBottom=i-o+"px"}i=n.offsetTop-t.offsetTop,t.style.position="relative",t.style.top=i+"px",zk.safari&&(t.style.left="-2px")}}}};